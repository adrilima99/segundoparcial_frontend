import{e as F,i as L,j as D}from"./chunk-AZTJU7OH.js";import{b as O,c as N,d as W,e as j,f as R,g as A,l as q,m as B}from"./chunk-5TRB5RNR.js";import"./chunk-IL2UONYL.js";import{c as V,f as T}from"./chunk-C5J56EWV.js";import{$a as i,Ka as a,La as f,Va as y,Ya as m,ab as o,bb as c,bc as E,dc as k,eb as v,fa as C,fb as h,gb as w,gc as I,mb as s,nb as S,oa as p,ob as M,pa as u,rb as x,sb as b,tb as _,vb as P}from"./chunk-RI4DZ32I.js";function H(r,G){if(r&1&&(i(0,"div",28),s(1),o()),r&2){let n=w();a(),S(n.error)}}function U(r,G){if(r&1&&(i(0,"div",29),s(1),o()),r&2){let n=w();m("ngClass",n.toastClass),a(),M(" ",n.toastMessage," ")}}var ie=(()=>{class r{constructor(n,e,t){this.http=n,this.router=e,this.authService=t,this.email="",this.password="",this.error=null,this.showPassword=!1,this.toastMessage=null,this.toastClass=""}togglePasswordVisibility(){this.showPassword=!this.showPassword}showToast(n,e){this.toastMessage=n,this.toastClass=e==="success"?"bg-green-500 text-white":"bg-red-500 text-white",setTimeout(()=>{this.toastMessage=null,e==="success"&&this.router.navigate(["/dashboard"])},2e3)}onSubmit(){let n={email:this.email,password:this.password};this.http.post("http://137.184.94.190/api/login/",n).subscribe(e=>{if(console.log("Response:",e),e.access&&e.user_data){let t=e.access,d=e.user_data.role,g=e.user_data.id;this.authService.setSession(t,d,g),this.showToast("Usuario loggeado con \xE9xito","success")}else this.showToast("Respuesta inesperada del servidor.","error")},e=>{console.error("Authentication error:",e);let t=e.error?.error||"Error en el login.";this.showToast(t,"error")})}static{this.\u0275fac=function(e){return new(e||r)(f(V),f(F),f(D))}}static{this.\u0275cmp=C({type:r,selectors:[["app-login"]],standalone:!0,features:[P],decls:37,vars:6,consts:[["loginForm","ngForm"],[1,"flex","h-screen","flex-col","md:flex-row"],[1,"w-full","md:w-1/2","bg-white","px-4","py-6","flex","flex-col"],[1,"flex","items-center","mb-8","px-4"],["src","https://res.cloudinary.com/dkpuiyovk/image/upload/v1744152864/logo_xpkefy.png","alt","SmartCart Logo",1,"w-14","h-14","mr-3"],[1,"text-2xl","font-bold","text-gray-800"],[1,"flex","flex-grow","items-center","justify-center"],[1,"bg-gray-900","text-white","rounded-xl","shadow-lg","px-8","py-6","w-full","max-w-md",3,"ngSubmit"],[1,"mb-6","text-center"],[1,"text-2xl","font-bold"],[1,"text-sm","text-gray-400","mt-1"],[1,"mb-4"],["for","email",1,"block","text-sm","mb-1"],[1,"relative"],["id","email","type","email","placeholder","admin.smartcar@gmail.com","name","email","required","",1,"w-full","bg-gray-800","border","border-gray-700","rounded","px-4","py-2","focus:outline-none","focus:ring-2","focus:ring-purple-500",3,"ngModelChange","ngModel"],[1,"absolute","inset-y-0","right-3","flex","items-center","text-gray-400"],[1,"fas","fa-envelope"],["for","password",1,"block","text-sm","mb-1"],["id","password","placeholder","********","name","password","required","",1,"w-full","bg-gray-800","border","border-gray-700","rounded","px-4","py-2","pr-10","focus:outline-none","focus:ring-2","focus:ring-purple-500",3,"ngModelChange","type","ngModel"],["type","button",1,"absolute","inset-y-0","right-3","text-gray-400",3,"click"],[1,"fas",3,"ngClass"],[1,"mb-4","text-right"],["href","#",1,"text-sm","text-purple-400","hover:underline"],["type","submit",1,"w-full","bg-purple-600","hover:bg-purple-700","text-white","font-bold","py-2","px-4","rounded"],["class","text-red-400 text-sm mt-4",4,"ngIf"],["class","fixed bottom-0 right-0 m-6 p-3 rounded shadow-lg",3,"ngClass",4,"ngIf"],[1,"hidden","md:flex","w-full","md:w-1/2","h-full"],["src","https://res.cloudinary.com/dkpuiyovk/image/upload/v1744152534/ChatGPT_Image_5_abr_2025_11_38_16_htmkop.png","alt","SmartCar Illustration",1,"object-cover","w-full","h-full"],[1,"text-red-400","text-sm","mt-4"],[1,"fixed","bottom-0","right-0","m-6","p-3","rounded","shadow-lg",3,"ngClass"]],template:function(e,t){if(e&1){let d=v();i(0,"div",1)(1,"div",2)(2,"div",3),c(3,"img",4),i(4,"h1",5),s(5,"SmartCart"),o()(),i(6,"div",6)(7,"form",7,0),h("ngSubmit",function(){return p(d),u(t.onSubmit())}),i(9,"div",8)(10,"h2",9),s(11,"Iniciar sesi\xF3n"),o(),i(12,"p",10),s(13,"Accede con tu cuenta asignada por el administrador."),o()(),i(14,"div",11)(15,"label",12),s(16,"Correo electr\xF3nico"),o(),i(17,"div",13)(18,"input",14),_("ngModelChange",function(l){return p(d),b(t.email,l)||(t.email=l),u(l)}),o(),i(19,"span",15),c(20,"i",16),o()()(),i(21,"div",11)(22,"label",17),s(23,"Contrase\xF1a"),o(),i(24,"div",13)(25,"input",18),_("ngModelChange",function(l){return p(d),b(t.password,l)||(t.password=l),u(l)}),o(),i(26,"button",19),h("click",function(){return p(d),u(t.togglePasswordVisibility())}),c(27,"i",20),o()()(),i(28,"div",21)(29,"a",22),s(30,"\xBFOlvidaste tu contrase\xF1a?"),o()(),i(31,"button",23),s(32," Iniciar sesi\xF3n "),o(),y(33,H,2,1,"div",24)(34,U,2,2,"div",25),o()()(),i(35,"div",26),c(36,"img",27),o()()}e&2&&(a(18),x("ngModel",t.email),a(7),m("type",t.showPassword?"text":"password"),x("ngModel",t.password),a(2),m("ngClass",t.showPassword?"fa-eye-slash":"fa-eye"),a(6),m("ngIf",t.error),a(),m("ngIf",t.toastMessage))},dependencies:[I,E,k,B,A,O,N,W,q,R,j,T,L],styles:[".fixed[_ngcontent-%COMP%]{position:fixed}.bottom-0[_ngcontent-%COMP%]{bottom:0}.right-0[_ngcontent-%COMP%]{right:0}.m-6[_ngcontent-%COMP%]{margin:1.5rem}.p-3[_ngcontent-%COMP%]{padding:.75rem}.rounded[_ngcontent-%COMP%]{border-radius:.375rem}.shadow-lg[_ngcontent-%COMP%]{box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}.bg-green-500[_ngcontent-%COMP%]{background-color:#48bb78}.bg-red-500[_ngcontent-%COMP%]{background-color:#f56565}.text-white[_ngcontent-%COMP%]{color:#fff}"]})}}return r})();export{ie as LoginComponent};
